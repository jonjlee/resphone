import"./styles-DrZedr2-.js";const d="https://resphone.jonjlee.workers.dev/auth";document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("loginForm");t.addEventListener("submit",async a=>{a.preventDefault();const n=document.getElementById("password").value,r=Math.floor(Date.now()/1e3),i=await crypto.subtle.digest("SHA-256",new TextEncoder().encode(`${r}|${n}`)).then(o=>Array.from(new Uint8Array(o)).map(e=>e.toString(16).padStart(2,"0")).join(""));try{if((await fetch(d,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({hash:i,utc:r})})).ok)sessionStorage.setItem("authenticated","true"),sessionStorage.setItem("password",n),window.location.href="main.html";else throw new Error("Authentication failed")}catch{const e=document.createElement("div");e.className="error-text",e.textContent="Invalid password. Please try again.";const s=document.querySelector(".error-text");s&&s.remove(),t.parentNode.insertBefore(e,t.nextSibling),document.getElementById("password").value=""}})});
