import"./styles-DpdKvta9.js";const i="https://resphone.jonjlee.workers.dev/auth";document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("loginForm");t.addEventListener("submit",async s=>{s.preventDefault();const n=document.getElementById("password").value,r=Math.floor(Date.now()/1e3),d=await crypto.subtle.digest("SHA-256",new TextEncoder().encode(`${r}|${n}`)).then(o=>Array.from(new Uint8Array(o)).map(e=>e.toString(16).padStart(2,"0")).join(""));try{if((await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({hash:d,utc:r})})).ok)localStorage.setItem("authenticated","true"),localStorage.setItem("password",n),window.location.href="main.html";else throw new Error("Authentication failed")}catch{const e=document.createElement("div");e.className="error-text",e.textContent="Invalid password. Please try again.";const a=document.querySelector(".error-text");a&&a.remove(),t.parentNode.insertBefore(e,t.nextSibling),document.getElementById("password").value=""}})});
